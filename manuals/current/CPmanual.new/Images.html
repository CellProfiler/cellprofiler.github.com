<html style=font-family:arial><head><title>Images</title></head><body><h1>Module: Images</h1><div> The <b>Images</b> module specifies the location of image files to be analyzed by your pipeline. <hr> The <b>Images</b> module allows you to specify the location of files to be analyzed by the pipeline;  setting this module correctly is the first step in creating a new project in CellProfiler.  These files can be located on your hard drive, on a networked computer elsewhere,  or accessible with a URL. You can also provide rules to specify only those files that you want  analyzed out of a larger collection (for example, from a folder containing both images for  analysis and non-image files that should be disregarded).<p><h4>What is a "digital image"?</h4> A <i>digital image</i> is a set of numbers arranged into a two-dimensional format of rows and columns;  a pixel refers to the row/column location of a particular point in the image. Pixels in grayscale or monochrome  (black/white) images contain a single intensity value, whereas in color images, each pixel contains a red,  green, and blue (RGB) triplet of intensity values. Additionally, the term image can be used as short-hand  for an image sequence, that is, an image collection such as a time-lapse series (2-D + <i>t</i>), confocal Z-stacks  (3-D), etc.<p><p>CellProfiler can read a wide variety of image formats by using a library called Bio-Formats;  see <a href="http://loci.wisc.edu/bio-formats/formats">here</a>  for the formats available. Some image formats are better than others for use in image analysis. Some are  <a href="http://www.techterms.com/definition/lossy">"lossy"</a> (information is lost in the conversion  to the format) like most JPG/JPEG files; others are  <a href="http://www.techterms.com/definition/lossless">"lossless"</a> (no image information is lost).  For image analysis purposes, a lossless format like TIF or PNG is recommended.</p><p><h4>What do I need as input?</h4> The most straightforward way to provide image files to the <b>Images</b> module is to simply drag-and-drop them on the file list panel (the blank space indicated by the text "Drop files and folders here").  <table cellpadding="0" width="100%"> <tr align="center"><td><img src="images\Images_FilelistPanel_Blank.png"></td></tr> </table><p><p>Using the file explorer tool of your choice (e.g., Explorer in Windows, Finder in Mac), you can drag-and-drop  individual files and/or entire folders into this panel. You can also right-click in the File list panel to  bring up a file selection window to browse for individual files; on the Mac, folders can be drag-and-dropped  from this window and you can select multiple files using Ctrl-A (Windows) or Cmd-A (Mac).  <table cellpadding="0" width="100%"> <tr align="center"><td><img src="images\Images_FilelistPanel_Filled.png"></td></tr> </table> Right-clicking on the file list panel will provide a context menu with options to modify the file list: <ul> <li><i>Show Selected Image:</i> Selecting this option (or double-clicking on the file) will open the image  in a new window.</li> <li><i>Remove From List:</i> Removes the selected file or folder from the list. Note that this does not remove  the file/folder from the hard drive.</li> <li><i>Remove Unavailable Files:</i> Refresh the list by checking for existence of file. Note that this does not remove  the file from the hard drive.</li> <li><i>Browse For Images:</i> Use a dialog box to select an image file (though drag-and-drop is recommended).</li> <li><i>Refresh:</i> Shown only if folder is selected. Refresh the list of files from the folder. Files that were manually removed from the list for that folder are restored.</li> <li><i>Expand All Folders:</i> Expand all trees shown in the file list panel.</li> <li><i>Collapse All Folders:</i> Collapse all folder trees shown in the file list panel.</li> <li><i>Clear File List:</i> Remove all files/folders in the file list panel. You will be prompted for  confirmation beforehand.</li> </ul></p><p><h4>What do the settings mean?</h4> If you have a subset of files that you want to analyze from the full listing shown in the  panel, you can filter the files according to a set of rules. This is useful in cases such as: <ul> <li>You have dragged a folder of images onto the file list panel, but the folder contains images  you want to analyze along with non-image files that you want to disregard.</li> <li>You have dragged a folder of images onto the file list panel, but the folder contains the images from one experiment that you want to process along with images from another experiment that you want to ignore for now. </li> </ul> You may specify as many rules as necessary to define the desired list of images.<p><p>After you have filtered the file list, press the "Apply" button to update the view of the  file list. You can also toggle the "Show file excluded by filters" box to modify the display of the files: <ul> <li>Checking this box will show all the files in the list, with the files that have been filtered out shown as grayed-out entries.</li> <li>Not checking this box will only show the files in the list that pass the filter(s).</li> </ul></p><p><h4>What do I get as output?</h4> The final product of the <b>Images</b> module is a file list in which any files that are not intended for  further processing have been removed, whether manually or using filtering. This list will be used when  collecting metadata (if desired) and when assembling the image sets in NamesAndTypes. The list can be  filtered further in NamesAndTypes to specify, for example, that a subset of these images represents a  particular wavelength. </div><div><h2>Settings:</h2><h4>Filter images?</h4><div>
            The <b>Images</b> module will pass all the files specified in the file list
            panel downstream to have a meaningful name assigned to it (so other modules can 
            access it) or optionally, to define the relationships between images and associated 
            metadata. Enabling file filtering will allow you to specify a subset of the files 
            from the file list panel by defining rules to filter the files. This approach is 
            useful if, for example, you drag-and-dropped a folder onto the file list panel 
            which contains a mixture of images that you want to analyze and other files that 
            you want to ignore.
            <p>Several options are available for this setting:
            <ul>
            <li><i>No filtering:</i> Do not enable filtering; all files in the File list
            panel will be passed to downstream modules for processing. This option can be
            selected if you are sure that only images are specified in the list.</li>
            <li><i>Images only:</i> Only image files will be passed to downstream
            modules. The permissible image formats are provided by a library called Bio-Formats; see 
            <a href="http://loci.wisc.edu/bio-formats/formats">here</a> for the formats available.</li>
            <li><i>Custom:</i> Specify custom rules for selecting a subset of 
            the files from the File list panel. This approach is useful if, for example, you 
            drag-and-dropped a folder onto the File list panel which contains a mixture of images 
            that you want to analyze and other files that you want to ignore.</li>
            </ul></p></div><h4>Select the rule criteria</h4><div>
            Specify a set of rules to narrow down the files to be analyzed. 
            <p>
Clicking the rule menus shows you all the file <i>attributes</i>, <i>operators</i> and <i>conditions</i> you can specify to narrow down 
the image list.
<ol>
<li>For each rule, first select the <i>attribute</i> that the rule is to be based on. For example, you can select "File" 
to define a rule that will filter files on the basis of their filename. </li>
<li>The <i>operator</i> drop-down is then updated with operators applicable to the attribute you selected. For example, if you select 
"File" as the attribute, the operator
menu includes text operators such as <i>Contain</i> or <i>Starts with</i>. On the other hand, if you
select "Extension" as the attribute, you can choose the logical operators "Is" or "Is not" from the menu.</li>
<li>In the operator drop-down menu, select the operator you want to use. For example,
if you want to match data exactly, you may want the "Exactly match" or the "Is" operator. If you want the
condition to be more loose, select an operator such as "Contains".</li>
<li>Use the <i>condition</i> box to type the condition you want to match. The more
you type, the more specific the condition is. 
<ul>
<li>As an example, if you create a new filter and select
<i>File</i> as the attribute, then select "Does" and "Contain" as the operators, and type "Channel" as the condition,
the filter finds all files that include the text "Channel", such as "Channel1.tif" "Channel2.jpg", "1-Channel-A01.BMP" and so on.</li>
<li>If you select "Does" and "Start with" as the operators and "Channel1" in the Condition box, 
the rule will includes such files as "Channel1.tif" "Channel1-A01.png", and so on.</li></ul>
<table cellpadding="0" width="100%">
<tr align="center"><td><img src="images\Images_UsingRules.png"></td></tr>
</table>
</li>
You can also create regular expressions (an advanced syntax for pattern matching; see <a href="#regexp">below</a>) in order to select particular files.
</ol>
<p>To add another rule, click the plus  buttons to the right of each rule. Subtract an existing rule by clicking the 
minus button.</p>
<p>You can also link a set of rules by choosing the logical expression <i>All</i> or <i>Any</i>. If you use  
<i>All</i> logical expression, all the rules be true for a file to be included in the File list. If
you use the <i>Any</i> option, only one of the conditions has to be met for a file to be included.</p>
<p>If you want to create more complex rules (e.g, some criteria matching all rules and others matching any),
you can create sets of rules, by clicking the ellipsis button (to the right of the plus button). 
Repeat the above steps to add more rules to the filter until you have
all the conditions you want to include.</p>

<a name="regexp"><h5>Details on regular expressions</h5></a>
<p>A <i>regular expression</i> is a general term refering to a method of searching for pattern matches in text. There is a high
learning curve to using them, but are quite powerful once you understand the basics.</p>
<p>
Patterns are specified using
combinations of metacharacters and literal characters. There are a few
classes of metacharacters, partially listed below. Some helpful links follow:
<ul>
<li>A more extensive explanation of regular expressions can be found 
<a href="http://www.python.org/doc/2.3/lib/re-syntax.html">here</a></li>
<li>A helpful quick reference can be found <a href="http://www.addedbytes.com/cheat-sheets/regular-expressions-cheat-sheet/">here</a></li>
<li><a href="http://pythex.org/">Pythex</a> provides quick way to test your regular expressions. Here is an 
<a href="http://pythex.org/?regex=Channel%5B1-2%5D-%5B0-9%5D%7B2%7D-(%3FP%3CWellRow%3E%5BA-H%5D)-(%3FP%3CWellColumn%3E%5B0-9%5D%7B2%7D)%5C.tif&test_string=Channel1-01-A-01.tif&ignorecase=0&multiline=0&dotall=0&verbose=0">example</a>
to capture information from a common microscope nomenclature.</li>
</ul>

<p>The following metacharacters match exactly one character from its respective set of characters:<br><br>
<table border="1">
<tr bgcolor="#555555"><th><font color="#FFFFFF"><b>Metacharacter</b></font></th><th><font color="#FFFFFF"><b>Meaning</b></font></th></tr>
<tr><td>.</td><td>Any character</td></tr>
<tr><td>[]</td><td>Any character contained within the brackets</td></tr>
<tr><td>[^]</td><td>Any character not contained within the brackets</td></tr>
<tr><td>\w</td><td>A word character [a-z_A-Z0-9]</td></tr>
<tr><td>\W</td><td>Not a word character [^a-z_A-Z0-9]</td></tr>
<tr><td>\d</td><td>A digit [0-9]</td></tr>
<tr><td>\D</td><td>Not a digit [^0-9]</td></tr>
<tr><td>\s</td><td>Whitespace [ \t\r\n\f\v]</td></tr>
<tr><td>\S</td><td>Not whitespace [^ \t\r\n\f\v]</td></tr>
</table>

<p>The following metacharacters are used to logically group subexpressions
or to specify context for a position in the match. These metacharacters
do not match any characters in the string:<br><br>
<table border="1">
<tr bgcolor="#555555"><th><font color="#FFFFFF"><b>Metacharacter</b></font></th><th><font color="#FFFFFF"><b>Meaning</b></font></th></tr>
<tr><td>( )</td><td>Group subexpression</td></tr>
<tr><td>|</td><td>Match subexpression before or after the |</td></tr>
<tr><td>^</td><td>Match expression at the start of string</td></tr>
<tr><td>$</td><td>Match expression at the end of string</td></tr>
<tr><td>\&lt;</td><td>Match expression at the start of a word</td></tr>
<tr><td>\&gt;</td><td>Match expression at the end of a word</td></tr>
</table>

<p>The following metacharacters specify the number of times the previous
metacharacter or grouped subexpression may be matched:<br><br>
<table border="1">
<tr bgcolor="#555555"><th><font color="#FFFFFF"><b>Metacharacter</b></font></th><th><font color="#FFFFFF"><b>Meaning</b></font></th></tr>
<tr><td>*</td><td>Match zero or more occurrences</td></tr>
<tr><td>+</td><td>Match one or more occurrences</td></tr>
<tr><td>?</td><td>Match zero or one occurrence</td></tr>
<tr><td>{n,m}</td><td>Match between n and m occurrences</td></tr>
</table>

<p>Characters that are not special metacharacters are all treated literally
in a match. To match a character that is a special metacharacter, escape
that character with a '\'. For example '.' matches any character, so to
match a '.' specifically, use '\.' in your pattern.

Examples:
<ul>
<li><code>[trm]ail</code> matches 'tail' or 'rail' or 'mail'.</li>
<li><code>[0-9]</code> matches any digit between 0 to 9.</li>
<li><code>[^Q-S]</code> matches any character other than 'Q' or 'R' or 'S'.</li>
<li><code>[[]A-Z]</code> matches any upper case alphabet along with square brackets.</li>
<li><code>[ag-i-9]</code> matches characters 'a' or 'g' or 'h' or 'i' or '-' or '9'.</li>
<li><code>[a-p]*</code> matches '' or 'a' or 'aab' or 'p' etc.</li>
<li><code>[a-p]+</code> matches  'a' or 'abc' or 'p' etc.</li>
<li><code>[^0-9]</code> matches any string that is not a number.</li>
<li><code>^[0-9]*$</code> matches either a blank string or a natural number.</li>
<li><code>^-[0-9]+$|^\+?[0-9]+$</code> matches any integer.</li>
</ul>
</p>
</p></div></div></body></html>