<html style=font-family:arial><head><title>SaveImages</title></head><body><h1>Module: SaveImages</h1><div><b>Save Images </b> saves image or movie files. <hr> Because CellProfiler usually performs many image analysis steps on many groups of images, it does <i>not</i> save any of the resulting images to the hard drive unless you specifically choose to do so with the <b>SaveImages</b>  module. You can save any of the processed images created by CellProfiler during the analysis using this module.<p><p>You can choose from many different image formats for saving your files. This allows you to use the module as a file format converter, by loading files in their original format and then saving them in an alternate format.</p><p><p>Note that saving images in 12-bit format is not supported, and 16-bit format is supported for TIFF only.</p><p>See also <b>NamesAndTypes</b>, <b>ConserveMemory</b>. </div><div><h2>Settings:</h2><h4>Select the type of image to save</h4><div>
            The following types of images can be saved as a file on the hard drive:
            <ul>
            <li><i>Image:</i> Any of the images produced upstream of <b>SaveImages</b> can be selected for saving. 
            Outlines created by <b>Identify</b> modules can also be saved with this option, but you must 
            select "Retain outlines..." of identified objects within the <b>Identify</b> module. You might
            also want to use the <b>OverlayOutlines</b> module prior to saving images.</li>
            <li><i>Mask:</i> Relevant only if the <b>Crop</b> module is used. The <b>Crop</b> module 
            creates a mask of the pixels of interest in the image. Saving the mask will produce a 
            binary image in which the pixels of interest are set to 1; all other pixels are 
            set to 0.</li>
            <li><i>Cropping:</i> Relevant only if the <b>Crop</b> module is used. The <b>Crop</b> 
            module also creates a cropping image which is typically the same size as the original 
            image. However, since the <b>Crop</b> permits removal of the rows and columns that are left 
            blank, the cropping can be of a different size than the mask.</li>
            <li><i>Movie:</i> A sequence of images can be saved as a movie file. Currently only AVIs can be written. 
            Each image becomes a frame of the movie.</li>
            <li><i>Objects:</i> Objects can be saved as an image. The image
            is saved as grayscale unless you select a color map other than 
            gray. Background pixels appear as black and
            each object is assigned an intensity level corresponding to
            its object number. The resulting image can be loaded as objects
            by the <b>NamesAndTypes</b> module. Objects are best saved as TIF
            files. <b>SaveImages</b> will use an 8-bit TIF file if there
            are fewer than 256 objects and will use a 16-bit TIF otherwise.
            Results may be unpredictable if you save using PNG and there
            are more than 255 objects or if you save using one of the other
            file formats.</li>
            </ul></div><h4>Select the image to save</h4><div>
            <i>(Used only if "Image", "Mask" or "Cropping" are selected to save)</i><br>
            Select the image you want to save.</div><h4>Select the objects to save</h4><div>
            <i>(Used only if saving "Objects")</i><br>
            Select the objects that you want to save.</div><h4>Select the module display window to save</h4><div>
            <i>(Used only if saving "Module window")</i><br>
            Enter the module number/name for which you want to 
            save the module display window.</div><h4>Select method for constructing file names</h4><div>
            <i>(Used only if saving non-movie files)</i><br>
            Several choices are available for constructing the image file name:
            <ul>
            <li><i>From image filename:</i> The filename will be constructed based
            on the original filename of an input image specified in <b>NamesAndTypes</b>. 
            You will have the opportunity to prefix or append
            additional text. 
            <p>If you have metadata associated with your images, you can append an text 
            to the image filename using a metadata tag. This is especially useful if you 
            want your output given a unique label according to the metadata corresponding 
            to an image group. The name of the metadata to substitute can be provided for 
            each image for each cycle using the <b>Metadata</b> module. 
            
You can insert a previously defined metadata tag by either using:
<ul><li>The insert key</li>
<li>A right mouse button click inside the control</li>
<li>In Windows, the Context menu key, which is between the Windows key and Ctrl key </li></ul>
The inserted metadata tag will appear in green. To change a previously inserted metadata tag, 
navigate the cursor to just before the tag and either:
<ul><li>Use the up and down arrows to cycle through possible values.</li>
<li>Right-click on the tag to display and select the available values.</li></ul>Please see the <b>Metadata</b> module for more details on metadata collection and usage.</p></li>
            <li><i>Sequential numbers:</i> Same as above, but in addition, each filename
            will have a number appended to the end that corresponds to
            the image cycle number (starting at 1).</li>
            <li><i>Single name:</i> A single name will be given to the
            file. Since the filename is fixed, this file will be overwritten with each cycle. 
            In this case, you would probably want to save the image on the last cycle 
            (see the <i>Select how often to save</i> setting). The exception to this is to 
            use a metadata tag to provide a unique label, as mentioned 
            in the <i>From image filename</i> option.</li>
            </ul></div><h4>Select image name for file prefix</h4><div>
            <i>(Used only when "From image filename" is selected for contructing the filename)</i><br>
            Select an image loaded using <b>NamesAndTypes</b>. The original filename will be
            used as the prefix for the output filename.</div><h4>Enter single file name</h4><div>
            <i>(Used only when "Sequential numbers" or "Single name" are selected for contructing the filename)</i><br>
            Specify the filename text here. If you have metadata 
            associated with your images, enter the filename text with the metadata tags. 
You can insert a previously defined metadata tag by either using:
<ul><li>The insert key</li>
<li>A right mouse button click inside the control</li>
<li>In Windows, the Context menu key, which is between the Windows key and Ctrl key </li></ul>
The inserted metadata tag will appear in green. To change a previously inserted metadata tag, 
navigate the cursor to just before the tag and either:
<ul><li>Use the up and down arrows to cycle through possible values.</li>
<li>Right-click on the tag to display and select the available values.</li></ul><br>
            Do not enter the file extension in this setting; it will be appended automatically.</div><h4>Number of digits</h4><div>
            <i>(Used only when "Sequential numbers" is selected for contructing the filename)</i><br>
            Specify the number of digits to be used for the sequential numbering. Zeros will be
            used to left-pad the digits. If the number specified here is less than that needed to
            contain the number of image sets, the latter will override the value entered.</div><h4>Append a suffix to the image file name?</h4><div>
            Select <i>Yes</i> to add a suffix to the image's file name.
            Select <i>No</i> to use the image name as-is.</div><h4>Text to append to the image name</h4><div>
            <i>(Used only when constructing the filename from the image filename)</i><br>
            Enter the text that should be appended to the filename specified above.</div><h4>Saved file format</h4><div>
            <i>(Used only when saving non-movie files)</i><br>
            Select the image or movie format to save the image(s). Most common
            image formats are available; MAT-files are readable by MATLAB.</div><h4>Output file location</h4><div> 
            <i>(Used only when saving non-movie files)</i><br>
            This setting lets you choose the folder for the output
            files. 
You can choose among the following options which are common to all file input/output 
modules:
<ul>
<li><i>Default Input Folder</i>: Use the default input folder.</li>
<li><i>Default Output Folder:</i> Use from the default output folder.</li>
<li><i>Elsewhere...</i>: Use a particular folder you specify.</li>
<li><i>Default input directory sub-folder</i>: Enter the name of a subfolder of 
the default input folder or a path that starts from the default input folder.</li>
<li><i>Default output directory sub-folder</i>: Enter the name of a subfolder of 
the default output folder or a path that starts from the default output folder.</li>
</ul>
<p><i>Elsewhere</i> and the two sub-folder options all require you to enter an additional 
path name. You can use an <i>absolute path</i> (such as "C:\imagedir\image.tif" on a PC) or a 
<i>relative path</i> to specify the file location relative to a directory):
<ul>
<li>Use one period to represent the current directory. For example, if you choose 
<i>Default Input Folder sub-folder</i>, you can enter "./MyFiles" to look in a 
folder called "MyFiles" that is contained within the Default Input Folder.</li>
<li>Use two periods ".." to move up one folder level. For example, if you choose 
<i>Default Input Folder sub-folder</i>, you can enter "../MyFolder" to look in a 
folder called "MyFolder" at the same level as the Default Input Folder.</li>
</ul></p>

            <p>An additional option is the following:
            <ul>
            <li><i>Same folder as image</i>: Place the output file in the same folder
            that the source image is located.</li>
            </ul></p>
            <p>
For <i>Elsewhere...</i>, <i>Default Input Folder sub-folder</i> and 
<i>Default Output Folder sub-folder</i>, if you have metadata associated with your 
images via <b>Metadata</b> module, you can name the folder using metadata
tags. 
You can insert a previously defined metadata tag by either using:
<ul><li>The insert key</li>
<li>A right mouse button click inside the control</li>
<li>In Windows, the Context menu key, which is between the Windows key and Ctrl key </li></ul>
The inserted metadata tag will appear in green. To change a previously inserted metadata tag, 
navigate the cursor to just before the tag and either:
<ul><li>Use the up and down arrows to cycle through possible values.</li>
<li>Right-click on the tag to display and select the available values.</li></ul>. 
            For instance, if you have a metadata tag named 
            "Plate", you can create a per-plate folder by selecting one the subfolder options
            and then specifying the subfolder name as "\g&lt;Plate&gt;". The module will 
            substitute the metadata values for the current image set for any metadata tags in the 
            folder name.Please see the <b>Metadata</b> module for more details on metadata collection and usage.</p>
            <p>If the subfolder does not exist when the pipeline is run, CellProfiler will
            create it.</p>
            <p>If you are creating nested subfolders using the sub-folder options, you can 
            specify the additional folders separated with slashes. For example, "Outlines/Plate1" will create
            a "Plate1" folder in the "Outlines" folder, which in turn is under the Default
            Input/Output Folder. The use of a forward slash ("/") as a folder separator will 
            avoid ambiguity between the various operating systems.</p></div><h4>Image bit depth</h4><div>
            <i>(Used only when saving files in a non-MAT format)</i><br>
            Select the bit-depth at which you want to save the images.
            <b>16-bit images are supported only for TIF formats.
            Currently, saving images in 12-bit is not supported.</b></div><h4>Overwrite existing files without warning?</h4><div>
            Select <i>Yes</i> to automatically overwrite a file if it already exists. 
            Select <i>No</i> to be prompted for confirmation first. 
            <p>If you are running the pipeline on a computing cluster,
            select <i>Yes</i> since you will not be able to intervene and answer the confirmation prompt.</p></div><h4>When to save</h4><div><a name='when_to_save'>
            <i>(Used only when saving non-movie files)</i><br>
            Specify at what point during pipeline execution to save file(s). </a>
            <ul>
            <li><i>Every cycle:</i> Useful for when the image of interest is created every cycle and is
            not dependent on results from a prior cycle.</li>
            <li><i>First cycle:</i> Useful for when you are saving an aggregate image created 
            on the first cycle, e.g., <b>CorrectIlluminationCalculate</b> with the <i>All</i>
            setting used on images obtained directly from <b>NamesAndTypes</b>.</li>
            <li><i>Last cycle</i> Useful for when you are saving an aggregate image completed 
            on the last cycle, e.g., <b>CorrectIlluminationCalculate</b> with the <i>All</i>
            setting used on intermediate images generated during each cycle.</li>
            </ul> </div><h4>Rescale the images? </h4><div>
            <i>(Used only when saving non-MAT file images)</i><br>
            Select <i>Yes</i> if you want the image to occupy the full dynamic range of the bit 
            depth you have chosen. For example, if you save an image to an 8-bit file, the
            smallest grayscale value will be mapped to 0 and the largest value will be mapped 
            to 2<sup>8</sup>-1 = 255. 
            <p>This will increase the contrast of the output image but will also effectively 
            stretch the image data, which may not be desirable in some 
            circumstances. See <b>RescaleIntensity</b> for other rescaling options.</p></div><h4>Save as grayscale or color image?</h4><div>
            <i>(Used only when saving "Objects")</i><br>
            You can save objects as a grayscale image or as a color image.
            <ul>
            <li><i>Grayscale: </i> Use the pixel's object number 
            (label) for the grayscale intensity. Background pixels are
            colored black. Grayscale images are more
            suitable if you are going to load the image as objects using
            <b>NamesAndTypes</b> or some other program that will be used to
            relate object measurements to the pixels in the image. 
            You should save grayscale images using the .TIF or .MAT formats
            if possible; otherwise you may have problems saving files
            with more than 255 objects.</li>
            <li><i>Color:</i> Assigns different colors to different 
            objects.</li>
            </ul></div><h4>Select colormap</h4><div>
            <i>(Used only when saving non-MAT file images)</i><br>
            This affects how images color intensities are displayed. All available colormaps can be seen 
            <a href="http://www.scipy.org/Cookbook/Matplotlib/Show_colormaps">here</a>.</div><h4>Record the file and path information to the saved image?</h4><div>
            Select <i>Yes</i>to store filename and pathname data for each of the new files created 
            via this module as a per-image measurement. 
            <p>Instances in which this information may be useful include:
            <ul>
            <li>Exporting measurements to a database, allowing 
            access to the saved image. If you are using the machine-learning tools or image
            viewer in CellProfiler Analyst, for example, you will want to enable this setting if you want
            the saved images to be displayed along with the original images.</li>
            <li>Allowing downstream modules (e.g., <b>CreateWebPage</b>) to access  
            the newly saved files.</li>
            </ul></p></div><h4>Create subfolders in the output folder?</h4><div>
            Select <i>Yes</i> to create subfolders to match the input image folder structure.</div><h4>Base image folder</h4><div>
            <i>Used only if creating subfolders in the output folder</i>
            In subfolder mode, <b>SaveImages</b> determines the folder for
            an image file by examining the path of the matching input file.
            The path that SaveImages uses is relative to the image folder
            chosen using this setting. As an example, input images might be stored
            in a folder structure of "images\<i>experiment-name</i>\
            <i>date</i>\<i>plate-name</i>". If the image folder is
            "images", <b>SaveImages</b> will store images in the subfolder,
            "<i>experiment-name</i>\<i>date</i>\<i>plate-name</i>".
            If the image folder is "images\<i>experiment-name</i>",
            <b>SaveImages</b> will store images in the subfolder,
            <i>date</i>\<i>plate-name</i>".
            </div><h4>Saved movie format</h4><div>
            <i>(Used only when saving movie files)</i><br>
            Select the movie format to use when saving movies. AVI and MOV
            store images from successive image sets as movie frames. TIF
            stores each image as an image plane in a TIF stack.
            </div></div></body></html>